<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Todo Tasks Deployment Single EC2 &#8212; LaunchCode: GIS DevOps  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Running a Java Application as a Linux Service" href="../unit-files/index.html" />
    <link rel="prev" title="Walkthrough: TDD" href="../tdd/index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
          GIS DevOps</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="/installations/index.html">Installations</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Pages <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ol>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day1/index.html">Week 1 - Day 1: Welcome, Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day2/index.html">Week 1 - Day 2: Terminal, Shell, Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day3/index.html">Week 1 - Day 3: Shell, Git, SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day4/index.html">Week 1 - Day 4: SQL, HTTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day5/index.html">Week 1 - Day 5: HTTP, Docker</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day1/index.html">Week 2 - Day 1: HTML, CSS, Browser DevTools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day2/index.html">Week 2 - Day 2: HTML/CSS Template, JavaScript Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day3/index.html">Week 2 - Day 3: Programming Fundamentals, JavaScript, DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day4/index.html">Week 2 - Day 4: JS, DOM, Promises, AJAX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day5/index.html">Week 2 - Day 5: Promises, AJAX, HTTP</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day1/index.html">Week 3 - Day 1: Java, OOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day2/index.html">Week 3 - Day 2: Spring Boot, Controllers, Routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day3/index.html">Week 3 - Day 3: Models, ORM (Hibernate)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day4/index.html">Week 3 - Day 4: Persistence, ORM Relationships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day5/index.html">Week 3 - Day 5: Review</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day1/index.html">Week 4 - Day 1: Git, GitLab, IntelliJ, Refactoring, Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day2/index.html">Week 4 - Day 2: Security, Test-driven development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day3/index.html">Week 4 - Day 3: Integration testing, dependency injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day4/index.html">Week 4 - Day 4: Postgres, Spring Data, JPA, Hibernate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day5/index.html">Week 4 - Day 5: AJAX, Open Layers</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week05/project/index.html">Week 5 - Project Week: Zika Mission Control</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day1/index.html">Week 6 - Day 1: RESTful web services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day2/index.html">Week 6 - Day 2: Swagger REST framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day3/index.html">Week 6 - Day 3: Intro to Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day4/index.html">Week 6 - Day 4: More Elasticsearch, Integrating ES with Spring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day5/index.html">Week 6 - Day 5: ES2015, ESLint, OpenLayers</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week07/project/index.html">Week 7 - Project Week: Zika Mission Control Part 2</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day1/index.html">Week 8 - Day 1: Intro to DevOps/AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day2/index.html">Week 8 - Day 2: More with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day3/index.html">Week 8 - Day 3: 12 Factor Apps and Auto Scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day4/index.html">Week 8 - Day 4: Gradle, Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day5/index.html">Week 8 - Day 5: Sonarqube</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week09/project/index.html">Week 9 - Project Week: Zika Mission Control Part 3</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week11/project/index.html">Week 11 - Project Week: Zika Mission Control Part 4</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week12/day3/index.html">Week 12 - Day 3: Intro to Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week12/day4/index.html">Week 12 - Day 4: OAuth 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week12/day5/index.html">Week 12 - Day 5: Certificates</a></li>
</ol>
<ol class="current">
<li class="toctree-l1"><a class="reference internal" href="../aws-intro/index.html">Walkthrough: Intro to AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws-rds-walkthrough/index.html">Walkthrough: RDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client-certificates/index.html">Client Certificates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client-deployment-s3/index.html">Deploy Zika Client to S3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../curl/index.html">Walkthrough: Intro to Curl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Walkthrough: Intro to Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch-spring/index.html">Walkthrough: Elasticsearch in Spring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch/index.html">Walkthrough: Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch2/index.html">Walkthrough: Elasticsearch Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eslint-airwaze/index.html">Walkthrough: ESLint Airwaze</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gitLab/index.html">Walkthrough: Git and Gitlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gradle/index.html">Walkthrough: Gradle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hashing-salting/index.html">Walkthrough: Hashing and Salting Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jenkins/index.html">Walkthrough: CI/CD With Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../launchcart-rest/index.html">Walkthrough: LaunchCart REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nginx-proxy-spring/index.html">NGINX as a Proxy to Spring Apache Tomcat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oauth2/index.html">Visual OAuth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openlayers/index.html">Walkthrough: OpenLayers and jQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postgress/index.html">Walkthrough: PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sonarqube/index.html">Walkthrough: Sonarqube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spring-data-jpa-hibernate/index.html">Walkthrough: Cars Demo - Spring Data, JPA, Hibernate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spring-integration-testing/index.html">Walkthrough: Spring Integration Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spring-pet-api-postgres-integration/index.html">Spring Postgres Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../springfox-swagger/index.html">Walkthrough: SwaggerUI via SpringFox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../swagger/index.html">Walkthrough: SwaggerUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tdd/index.html">Walkthrough: TDD</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Todo Tasks Deployment Single EC2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit-files/index.html">Running a Java Application as a Linux Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit-tests/index.html">Walkthrough: Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading-spring-boot/index.html">Walkthrough: Upgrading to Spring Boot 2.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watch-todo-tasks-deployment/index.html">Watch a Todo Tasks Deployment</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../studios/airwaze/index.html">Studio: Airwaze</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/aws-EC2-basics/index.html">Studio: AWS Devops Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/aws-auto-scaling/index.html">Scaling horizontally AutoScaling Group</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/aws-rds-vpc/index.html">Studio: AWS RDS VPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/curl/index.html">Curl Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/elasticsearch1/index.html">Elasticsearch Query Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/elasticsearch2/index.html">Elasticsearch Queries Studio 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/junit/index.html">Studio: JUnit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/launchcart-rest/index.html">Studio: LaunchCart REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/launchcart1/index.html">Studio: LaunchCart Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/launchcart2/index.html">Studio: LaunchCart Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/openlayers-es2015/index.html">Studio: OpenLayers ES2015 Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/swagger/index.html">Studio: Springfox and Swagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studios/tdd/index.html">Studio: Test-Driven Development</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../project-requirements/deploy-mapnotes-api-single-ec2/index.html">Project: Deploy Map Notes to a Single EC2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project-requirements/mapnotes-api/index.html">Project: Map Notes API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project-requirements/mapnotes-pipeline/index.html">Project: Mapnotes API Jenkins Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project-requirements/mapnotes-rds/index.html">Project: Map Notes Backed by AWS RDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project-requirements/zika-client-rest/index.html">Project: Zika Client REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project-requirements/zika-client/index.html">Project: Zika Client</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../installations/00-prep-week/index.html">Installation: Essential Tooling &amp; Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/01-docker/index.html">Installation: Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/02-docker-psql/index.html">Installation: Docker PSQL Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/03-docker-postgis/index.html">Installation: Docker PostGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/04-docker-elasticsearch/index.html">Installation: Docker Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/05-docker-kibana/index.html">Installation: Docker Kibana</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/06-docker-jenkins/index.html">Installation: Docker Jenkins</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/00-intellij/index.html">Configuration: IntelliJ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/01-runtime-configurations/index.html">Configuration: IntelliJ - Runtime Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/02-environment-variables-intellij/index.html">Configuration: Environment Variables - IntelliJ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/04-spring-elasticsearch/index.html">Configuration: Spring &amp; Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/05-spring-postgres/index.html">Configuration: Spring &amp; Postgres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/06-vscode-eslint/index.html">Configuration: Visual Studio Code - ESLint</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../notes/docker/index.html">Docker</a></li>
</ol>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Todo Tasks Deployment Single EC2</a><ul>
<li><a class="reference internal" href="#build-artifacts">Build Artifacts</a></li>
<li><a class="reference internal" href="#deliver-artifacts">Deliver Artifacts</a><ul>
<li><a class="reference internal" href="#create-bucket-for-artifacts">Create Bucket for Artifacts</a></li>
<li><a class="reference internal" href="#deliver-artifacts-to-bucket">Deliver Artifacts to bucket</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-server">Create Server</a><ul>
<li><a class="reference internal" href="#create-a-virtual-network-vpc">Create a Virtual Network (VPC)</a></li>
<li><a class="reference internal" href="#create-a-virtual-machine-ec2">Create a Virtual Machine (EC2)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-server">Configure Server</a><ul>
<li><a class="reference internal" href="#access-server-via-ssh">Access Server via SSH</a></li>
<li><a class="reference internal" href="#install-dependencies">Install Dependencies</a><ul>
<li><a class="reference internal" href="#aws-cli">AWS CLI</a></li>
<li><a class="reference internal" href="#docker">Docker</a></li>
<li><a class="reference internal" href="#docker-compose">Docker-Compose</a></li>
<li><a class="reference internal" href="#java-run-time-11">Java Run time 11</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-artifacts">Get Artifacts</a></li>
<li><a class="reference internal" href="#setup-database">Setup Database</a></li>
<li><a class="reference internal" href="#run-application">Run Application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#review">Review</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="todo-tasks-deployment-single-ec2">
<span id="id1"></span><h1>Todo Tasks Deployment Single EC2<a class="headerlink" href="#todo-tasks-deployment-single-ec2" title="Permalink to this headline">¶</a></h1>
<p>Today we will be deploying the Todo Tasks API to a single AWS EC2.</p>
<p>You can find the source code to the <a class="reference external" href="https://gitlab.com/LaunchCodeTraining/todo-tasks-api-solution" target="_blank">todo-tasks-api solution on gitlab<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>. Or you can use your personal Todo Tasks API, however it needs to be in a stable state.</p>
<p>Our goal is to take this completed API and to deploy it, making it accessible to anyone via the internet.</p>
<p>Recall from our lecture the major deployment categories:</p>
<ul class="simple">
<li>Build artifacts</li>
<li>Deliver artifacts</li>
<li>Create server</li>
<li>Configure server</li>
</ul>
<p>Each of these categories may have multiple sub steps.</p>
<div class="section" id="build-artifacts">
<h2>Build Artifacts<a class="headerlink" href="#build-artifacts" title="Permalink to this headline">¶</a></h2>
<p>After changing into your project directory you will need to engage the Gradle <code class="docutils literal notranslate"><span class="pre">bootJar</span></code> command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./gradlew bootJar
</pre></div>
</div>
<p>You will see that this generated a new JAR file: <code class="docutils literal notranslate"><span class="pre">build/libs/todo-0.0.1-SNAPSHOT.jar</span></code>.</p>
<p>It includes all of our source code, and the library code we depend on.</p>
</div>
<div class="section" id="deliver-artifacts">
<h2>Deliver Artifacts<a class="headerlink" href="#deliver-artifacts" title="Permalink to this headline">¶</a></h2>
<p>We will need to move this JAR file that was just created to a location that our server can access. In this case we will be moving it to S3, Amazon’s Simple Storage Service. Our Virtual Machine will be granted access to the files in this S3 bucket.</p>
<p>We will need to:</p>
<ul class="simple">
<li>create a suitable bucket</li>
<li>copy our JAR file to the bucket</li>
</ul>
<div class="section" id="create-bucket-for-artifacts">
<h3>Create Bucket for Artifacts<a class="headerlink" href="#create-bucket-for-artifacts" title="Permalink to this headline">¶</a></h3>
<p>From your terminal we will need to access the AWS CLI to create a bucket.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 mb s3://lc-gisdevops-c7-&lt;your-name&gt;-artifacts
</pre></div>
</div>
<p>You can check that it created successfully by listing all the buckets and checking for your new bucket name:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 ls
</pre></div>
</div>
<p>Now we need to move our JAR file and our docker-compose.yml.</p>
</div>
<div class="section" id="deliver-artifacts-to-bucket">
<h3>Deliver Artifacts to bucket<a class="headerlink" href="#deliver-artifacts-to-bucket" title="Permalink to this headline">¶</a></h3>
<p>Change into your project directory.</p>
<p>Then copy the <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> and JAR file to your new bucket.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 cp docker-compose.yml s3://lc-gisdevops-c7-&lt;your-name&gt;-artifacts
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 cp build/libs/todo-0.0.1-SNAPSHOT.jar s3://lc-gisdevops-c7-&lt;your-name&gt;-artifacts/todo-app.jar
</pre></div>
</div>
<p>You can verify that both of these files were uploaded by listing the contents of your bucket:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 ls s3://lc-gisdevops-c7-&lt;your-name&gt;-artifacts
</pre></div>
</div>
<p>You should see two files <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> and <code class="docutils literal notranslate"><span class="pre">todo-app.jar</span></code>.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>note</p>
<p class="last">Take note that the second <code class="docutils literal notranslate"><span class="pre">aws</span> <span class="pre">s3</span> <span class="pre">cp</span></code> command changes the name of the copied file. It was originally named <code class="docutils literal notranslate"><span class="pre">todo-0.0.1-SNAPSHOT.jar</span> <span class="pre">and</span> <span class="pre">it</span> <span class="pre">is</span> <span class="pre">renamed</span> <span class="pre">to</span> <span class="pre">``todo-app.jar</span></code> as it is written to the S3 bucket.</p>
</div>
</div>
</div>
<div class="section" id="create-server">
<h2>Create Server<a class="headerlink" href="#create-server" title="Permalink to this headline">¶</a></h2>
<p>Our next step is to create our server. However, a server cannot live in isolation. It must be attached to a Virtual Network so internet access can be granted to the server.</p>
<p>Before we can create our server, we will need to create a Virtual Network.</p>
<div class="section" id="create-a-virtual-network-vpc">
<h3>Create a Virtual Network (VPC)<a class="headerlink" href="#create-a-virtual-network-vpc" title="Permalink to this headline">¶</a></h3>
<p>We will need to create a new Virtual Public Cloud, which is our virtual network.</p>
<p>From the AWS Web console navigate to the VPC homepage. The easiest way to do this is to use the search bar.</p>
<img alt="aws search" src="../../_images/aws-search.png" />
<p>This will bring you to the VPC home page:</p>
<img alt="vpc home" src="../../_images/vpc-home.png" />
<p>From here click the orange button <code class="docutils literal notranslate"><span class="pre">Launch</span> <span class="pre">VPC</span> <span class="pre">Wizard</span></code> at the top of the page. This takes you to the VPC Wizard, which is one of the fastest ways to create a new VPC. We will be selecting the default option which is <code class="docutils literal notranslate"><span class="pre">VPC</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">Single</span> <span class="pre">Public</span> <span class="pre">Subnet</span></code>.</p>
<img alt="vpc wizard" src="../../_images/vpc-wizard.png" />
<p>After selecting <code class="docutils literal notranslate"><span class="pre">VPC</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">Single</span> <span class="pre">Public</span> <span class="pre">Subnet</span></code> click <code class="docutils literal notranslate"><span class="pre">Select</span></code>.</p>
<p>This takes us to the VPC creation screen, which we will mainly leave as defaults:</p>
<img alt="vpc form" src="../../_images/vpc-form.png" />
<p>We need to set:</p>
<ul class="simple">
<li>VPC name: <code class="docutils literal notranslate"><span class="pre">&lt;your-name&gt;-todo-tasks-vpc</span></code></li>
<li>Availability zone: <code class="docutils literal notranslate"><span class="pre">us-east-1a</span></code></li>
</ul>
<p>After filling in this information we will click <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">VPC</span></code>. After a few seconds your new VPC will be ready for action. Save the VPC name for the next step.</p>
</div>
<div class="section" id="create-a-virtual-machine-ec2">
<h3>Create a Virtual Machine (EC2)<a class="headerlink" href="#create-a-virtual-machine-ec2" title="Permalink to this headline">¶</a></h3>
<p>Navigate to the EC2 page. From the menu at the top of your screen click <code class="docutils literal notranslate"><span class="pre">Services</span></code> and select <code class="docutils literal notranslate"><span class="pre">EC2</span></code> or use the search bar. This will take you to the EC2 home page:</p>
<img alt="ec2 home" src="../../_images/ec2-home.png" />
<p>We want to create a new EC2 instance so click the <code class="docutils literal notranslate"><span class="pre">Instances</span></code> option on the left hand menu:</p>
<img alt="instance option" src="../../_images/instance-option.png" />
<p>This will show you the list of all the instances in the <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code> region that are associated with this account.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>note</p>
<p class="last">All of our accounts are under the LaunchCode Devops account so you will be able to see all of the instances created by the instructors and your fellow students. We thank you for not touching any instances that are not yours.</p>
</div>
<img alt="all instances" src="../../_images/all-instances.png" />
<p>From the screen with all the instances click the orange <code class="docutils literal notranslate"><span class="pre">Launch</span> <span class="pre">instances</span></code> button in the top right hand corner of the screen.</p>
<p>This takes you to a wizard with lots of options for configuring this EC2 instance:</p>
<img alt="ec2 wizard 1" src="../../_images/ec2-wizard-1.png" />
<p>For now we will be using the AWS provided Ubuntu 18.04 image. Search for <code class="docutils literal notranslate"><span class="pre">ubuntu</span></code> in the search bar to bring it up:</p>
<img alt="ubuntu search" src="../../_images/ubuntu-search.png" />
<p>Select the option that matches <code class="docutils literal notranslate"><span class="pre">Ubuntu</span> <span class="pre">Server</span> <span class="pre">18.04</span> <span class="pre">LTS</span> <span class="pre">(HVM),</span> <span class="pre">SSD</span> <span class="pre">Volume</span> <span class="pre">Type</span></code> make sure it is the <code class="docutils literal notranslate"><span class="pre">free</span> <span class="pre">tier</span></code> eligible image.</p>
<p>After selecting the image you will be taken to the second screen of the EC2 wizard:</p>
<img alt="ec2 wizard 2" src="../../_images/ec2-wizard-2.png" />
<p>We will be selecting the default EC2 type: <code class="docutils literal notranslate"><span class="pre">t2.micro</span></code> this should be a powerful enough machine to run our API and database. Take note that this is where the CPU and RAM is configured. Click <code class="docutils literal notranslate"><span class="pre">Next</span> <span class="pre">Configure</span> <span class="pre">Instance</span> <span class="pre">Details</span></code>.</p>
<p>This third section of the wizard is where we will set the most aspects of our VM.</p>
<p>We will leave everything default with the exception of:</p>
<ul class="simple">
<li>Network: <code class="docutils literal notranslate"><span class="pre">&lt;your-name&gt;-todo-tasks-vpc</span></code></li>
<li>Subnet: <code class="docutils literal notranslate"><span class="pre">Public</span> <span class="pre">subnet</span></code></li>
<li>Auto-assign Public IP: <code class="docutils literal notranslate"><span class="pre">enable</span></code></li>
<li>IAM Role: <code class="docutils literal notranslate"><span class="pre">EC2_to_S3_readonly</span></code></li>
</ul>
<img alt="ec2 wizard 3" src="../../_images/ec2-wizard-3.png" />
<img alt="ec2 wizard 3.2" src="../../_images/ec2-wizard-3-2.png" />
<p>After filling out the necessary information navigate to the 5th wizard screen <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Tags</span></code>:</p>
<img alt="ec2 wizard 5" src="../../_images/ec2-wizard-5.png" />
<p>Click the <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Tag</span></code> button and add a Key Value pair matching:</p>
<ul class="simple">
<li>Key: <code class="docutils literal notranslate"><span class="pre">&lt;your-name&gt;-todo-tasks-ec2</span></code></li>
<li>Value: <code class="docutils literal notranslate"><span class="pre">&lt;your-name&gt;</span> <span class="pre">Todo</span> <span class="pre">Tasks</span> <span class="pre">API</span> <span class="pre">EC2</span></code></li>
</ul>
<img alt="ec2 wizard 5.2" src="../../_images/ec2-wizard-5-2.png" />
<p>After adding this new tag, move to the next section <code class="docutils literal notranslate"><span class="pre">Configure</span> <span class="pre">Security</span> <span class="pre">Group</span></code>.</p>
<p>Name the security group, make sure port 22 is only open to <strong>your</strong> IP address, and open up port 80 to <strong>anywhere</strong>. Look at the following picture for guidance:</p>
<img alt="ec2 wizard 6" src="../../_images/ec2-wizard-6.png" />
<p>Finally click <code class="docutils literal notranslate"><span class="pre">Review</span> <span class="pre">and</span> <span class="pre">Launch</span></code>. This will take you to the review screen. Take a second to make sure you filled everything out properly and then click <code class="docutils literal notranslate"><span class="pre">Launch</span></code>.</p>
<p>Before your EC2 will launch you will need to create an SSH key pair if you haven’t already. If you have already created a key associated with your AWS account simply use that one. If not follow the on screen prompt to create one and move it to your <code class="docutils literal notranslate"><span class="pre">~/.ssh/</span></code> directory.</p>
<p>Finally after reviewing, and choosing a valid key pair click <code class="docutils literal notranslate"><span class="pre">Launch</span></code> it will provision your EC2 instance.</p>
<p>Click the <code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">Instance</span></code> button to be taken to the EC2 instances home page. From here search for the tag you created earlier and your EC2 should pop up.</p>
<img alt="ec2 tag search" src="../../_images/ec2-tag-search.png" />
<p>Click the instance ID hyperlink to be taken to your EC2’s homepage.</p>
<img alt="ec2 instance homepage" src="../../_images/ec2-instance-homepage.png" />
<p>Take note of the public IPv4 address as we will be using it to gain access to our EC2.</p>
</div>
</div>
<div class="section" id="configure-server">
<h2>Configure Server<a class="headerlink" href="#configure-server" title="Permalink to this headline">¶</a></h2>
<div class="section" id="access-server-via-ssh">
<h3>Access Server via SSH<a class="headerlink" href="#access-server-via-ssh" title="Permalink to this headline">¶</a></h3>
<p>First step is to SSH into our new EC2 instance. Using the public IP address from the last step we will be accessing the EC2’s terminal from our machine.</p>
<p>From your terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -i ~/.ssh/&lt;your-name&gt;.pem ubuntu@&lt;ec2-public-ip&gt;
</pre></div>
</div>
<p>If this is successful you will be prompted with a warning since you are connecting to a remote machine for the first time:</p>
<img alt="ec2 ssh" src="../../_images/ec2-ssh.png" />
<p>Type in yes and hit enter. This will add the remote server to your laptop’s list of trusted servers and you will be let into the EC2:</p>
<img alt="ec2 ssh success" src="../../_images/ec2-ssh-success.png" />
<p>From this machine we will:</p>
<ul class="simple">
<li>install our dependencies</li>
<li>access build artifacts via S3</li>
<li>setup docker database</li>
<li>run application</li>
</ul>
</div>
<div class="section" id="install-dependencies">
<h3>Install Dependencies<a class="headerlink" href="#install-dependencies" title="Permalink to this headline">¶</a></h3>
<p>We will be using the Ubuntu Aptitude Package Manager to install our dependencies.</p>
<p>We have a lot to install so let’s get started.</p>
<div class="section" id="aws-cli">
<h4>AWS CLI<a class="headerlink" href="#aws-cli" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install awscli -y
</pre></div>
</div>
<p>Verify it worked with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws --version
</pre></div>
</div>
</div>
<div class="section" id="docker">
<h4>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install apt-transport-https ca-certificates curl software-properties-common -y
curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo apt-key add -
sudo add-apt-repository <span class="s2">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable&quot;</span>
sudo apt update -y
apt-cache policy docker-ce
sudo apt install docker-ce -y
</pre></div>
</div>
<p>Verify it worked with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker --version
</pre></div>
</div>
</div>
<div class="section" id="docker-compose">
<h4>Docker-Compose<a class="headerlink" href="#docker-compose" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo curl -L <span class="s2">&quot;https://github.com/docker/compose/releases/download/1.26.0/docker-compose-</span><span class="k">$(</span>uname -s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname -m<span class="k">)</span><span class="s2">&quot;</span> -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
</pre></div>
</div>
<p>Verify it worked with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker-compose --version
</pre></div>
</div>
</div>
<div class="section" id="java-run-time-11">
<h4>Java Run time 11<a class="headerlink" href="#java-run-time-11" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install default-jre -y
</pre></div>
</div>
<p>Verify it worked with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>java --version
</pre></div>
</div>
<p>Now that everything is installed, let’s access our S3 bucket to grab the <code class="docutils literal notranslate"><span class="pre">todo-app.jar</span></code> and <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> files.</p>
</div>
</div>
<div class="section" id="get-artifacts">
<h3>Get Artifacts<a class="headerlink" href="#get-artifacts" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aws s3 cp s3://lc-gisdevops-c7-paul-artifacts/todo-app.jar .
aws s3 cp s3://lc-gisdevops-c7-paul-artifacts/docker-compose.yml .
</pre></div>
</div>
</div>
<div class="section" id="setup-database">
<h3>Setup Database<a class="headerlink" href="#setup-database" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo docker-compose up -d
</pre></div>
</div>
</div>
<div class="section" id="run-application">
<h3>Run Application<a class="headerlink" href="#run-application" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo java -jar todo-app.jar --DB_HOST<span class="o">=</span>localhost --DB_PORT<span class="o">=</span><span class="m">5444</span> --DB_NAME<span class="o">=</span>todo --DB_USER<span class="o">=</span>todo_user --DB_PASS<span class="o">=</span>todopass --APP_PORT<span class="o">=</span><span class="m">80</span>
</pre></div>
</div>
<p>After your application starts up (you should see the familiar tom cat logs) your application will be available on port 80 at your public ip address.</p>
<p>To try it out from your local machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl &lt;public-ip-address&gt;/todos
</pre></div>
</div>
<p>Try out all the endpoints with curl:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X POST &lt;public-ip-address&gt;/todos -H <span class="s1">&#39;Content-Type: application/json&#39;</span> -d <span class="s1">&#39;{&quot;text&quot;: &quot;clean the kitchen&quot;}&#39;</span>
curl &lt;public-ip-address&gt;/todos
curl &lt;public-ip-address&gt;/todos/1
curl &lt;public-ip-address&gt;/todos/1/tasks
curl -X POST &lt;public-ip-address&gt;/todos/1/tasks -H <span class="s1">&#39;Content-Type: application/json&#39;</span> -d <span class="s1">&#39;{&quot;title&quot;: &quot;unload dishwasher&quot;}&#39;</span>
curl &lt;public-ip-address&gt;/todos/1/tasks
</pre></div>
</div>
<p>Congrats on deploying your first API! We will continue to build on this throughout the remaining AWS lessons. We took some short cuts, and aren’t following some best practices, but we will get to that later. For now revel at your newfound operation powers!</p>
</div>
</div>
<div class="section" id="review">
<h2>Review<a class="headerlink" href="#review" title="Permalink to this headline">¶</a></h2>
<p>We covered a lot of ground in this walkthrough, but they can be defined in the following categories:</p>
<ul class="simple">
<li>Build artifacts</li>
<li>Deliver artifacts</li>
<li>Create server</li>
<li>Configure server</li>
</ul>
<p>These steps are the same across CSPs, different tech stacks and different applications. The steps within the categories almost always changed based on the needs of your specific deployment.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>